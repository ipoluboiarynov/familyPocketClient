<div class="container-fluid mt-3">
  <!--  Profile / Currencies -->
  <div class="row">
    <!--   Profile   -->
    <div class="col-12 col-sm-6 pr-0 pl-0 pr-sm-2">
      <div class="card card-frame" *ngIf="user">
        <div class="card-body">
          <h4 class="card-title text-uppercase text-center mb-3">Profile</h4>
          <form [formGroup]="userForm" (ngSubmit)="changeProfile()">
            <div class="form-group">
              <div class="input-group input-group-merge">
                <div class="input-group-prepend">
                  <span class="input-group-text">@</span>
                </div>
                <input type="text" class="form-control" formControlName="name" aria-label="Name" aria-describedby="Name"
                [value]="'value'">
                <div class="input-group-append">
                  <button class="btn btn-outline-light" type="submit" id="edit-name">Change</button>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="input-group input-group-merge">
                <div class="input-group-prepend">
                  <span class="input-group-text">@</span>
                </div>
                <input type="text" class="form-control" formControlName="email" aria-label="Email" aria-describedby="Email">
                <div class="input-group-append">
                  <button class="btn btn-outline-light" type="submit" id="edit-email">Change</button>
                </div>
              </div>
            </div>
          </form>



        </div>
      </div>
    </div>
    <!--   Empty   -->
    <div class="col-12 col-sm-6 pr-0 pl-0 pl-sm-2">
    </div>
  </div>
  <!--  Account Types / Currencies   -->
  <div class="row">
    <!--   Account Types   -->
    <div class="col-6=12 col-sm-6 pr-0 pl-0 pr-sm-2">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Account Types</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(accountTypeModal, 'accountType')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush">
              <thead class=" thead-light">
              <tr>
                <th class="sort text-center" data-sort="account" scope="col">Type</th>
                <th class="sort text-center" data-sort="amount" scope="col">Debit/Credit</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let accountType of accountTypes">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class="avatar rounded-circle mr-3" [ngClass]="!accountType.negative ? 'bg-success' : 'bg-danger'">
                      <i [ngClass]="!accountType.negative ? 'fas fa-credit-card' : 'far fa-credit-card'"></i>
                    </div>
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{accountType.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="budget text-center">{{accountType.negative ? 'credit' : 'debit'}}</td>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_accountType" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_accountType">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)"  (click)="open(accountTypeModal, 'accountType', accountType)"
                         class="dropdown-item">Edit</a>
                      <a href="javascript:void(0)" (click)="deleteAccountType(accountType)" class="dropdown-item">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>




        </div>
      </div>
    </div>
    <!--   Currencies   -->
    <div class="col-12 col-sm-6 pr-0 pl-0 pl-sm-2">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <button type="button" class="btn btn-sm btn-slack btn-icon mr-auto mb-3" (click)="uploadRates()">
              <span class="btn-inner--icon"><i class="fas fa-sync-alt"></i></span>
            </button>
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Currencies</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(currencyModal, 'currency')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush">
              <thead class=" thead-light">
              <tr>
                <th class="sort text-center" data-sort="account" scope="col">Currency</th>
                <th class="sort text-center" data-sort="amount" scope="col">Direction</th>
                <th class="sort text-center" data-sort="date" scope="col">Rating</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let currency of currencies">
                <th scope="row">
                  <div class=" media align-items-center">
                    <i [ngClass]="currency.icon" class=" fs-24 mr-3"></i>
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{currency.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="budget text-center">{{currency.name !== 'USD' ? (currency.base ? currency.name + '/USD' : 'USD/' + currency.name) : 'USD'}}</td>
                <td class="budget text-center">
                  {{currency | getRateForCurrency:rates}}
                </td>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_currency" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_currency">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(currencyModal, 'currency', currency)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteCurrency(currency)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>

              </tbody>
            </table>
          </div>
          <div class="text-center font-weight-light">Last Update: {{rates?.date?? '-'}}</div>

        </div>
      </div>
    </div>
  </div>
  <!-- Categories -->
  <div class="row">
    <!--  Expenses  -->
    <div class="col-12 col-sm-6 pr-0 pl-0 pr-sm-2">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Expenses</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(categoryModal, 'expense')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush" *ngIf="expenses.length > 0">
              <thead class=" thead-light">
              <tr>
                <th class="sort" data-sort="account" scope="col">Expense</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let expense of expenses">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class="avatar rounded-circle mr-3 bg-danger">
                      <i [ngClass]="expense.icon ? expense.icon : 'fas fa-sync'"></i>
                    </div>
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{expense.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_expense" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_expense">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(categoryModal, 'expense', expense)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteCategory(expense)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <!--  Incomes  -->
    <div class="col-6=12 col-sm-6 pr-0 pl-0 pl-sm-2">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Incomes</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(categoryModal, 'income')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush" *ngIf="incomes.length > 0">
              <thead class=" thead-light">
              <tr>
                <th class="sort" data-sort="account" scope="col">Income</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let income of incomes">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class="avatar rounded-circle mr-3 bg-success">
                      <i [ngClass]="income.icon ? income.icon : 'fas fa-sync'"></i>
                    </div>
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{income.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_income" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_income">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(categoryModal, 'income', income)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteCategory(income)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--  Accounts  -->
  <div class="row">
    <div class="col-12 pr-0 pl-0">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Accounts</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(accountModal, 'account')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush">
              <thead class=" thead-light">
              <tr>
                <th class="sort text-center" data-sort="account" scope="col">Account</th>
                <th class="sort text-center" data-sort="icon" scope="col">Icon</th>
                <th class="sort text-center" data-sort="amount" scope="col">Start amount</th>
                <th class="sort text-center" data-sort="date" scope="col">Start Date</th>
                <th class="sort text-center" data-sort="limit" scope="col">Limit</th>
                <th class="sort text-center" data-sort="currency" scope="col">Currency</th>
                <th class="text-center">Balance</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let account of accounts">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class="color-box mr-3" [ngStyle]="{'background-color': account.color}"></div>
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{account.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="budget text-center"><i [ngClass]="[account.icon, 'fs-32']"></i></td>
                <td class="budget text-center">{{account.startBalance}}</td>
                <td class="budget text-center">{{account.startDate | date: 'yyyy-MM-dd'}}</td>
                <td class="budget text-center">{{account.creditLimit}}</td>
                <td class="budget text-center">{{account.currency.name?? '-'}}</td>
                <td class="budget text-center">{{account.balance?? '-'}}</td>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_account" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_account">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(accountModal, 'account', account)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteAccount(account)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--   Filters   -->
  <div class="row">
    <div class="col-12 pr-0 pl-0">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Filters</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(filterModal, 'filter')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush">
              <thead class=" thead-light">
              <tr>
                <th class="sort" data-sort="name" scope="col">Name</th>
                <th class="sort text-center" data-sort="start_date" scope="col">Start Date</th>
                <th class="sort text-center" data-sort="endDate" scope="col">End Date</th>
                <th class="sort text-center" data-sort="recordType" scope="col">Record Type</th>
                <th class="text-center" scope="col">Accounts</th>
                <th class="text-center" scope="col">Categories</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let filter of filters; let i=index;">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{filter.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="budget text-center">{{filter.startDate | date:'yyyy-MM-dd'}}</td>
                <td class="budget text-center">{{filter.endDate | date:'yyyy-MM-dd'}}</td>
                <td class="budget text-center">{{filter.recordType}}</td>
                <td>
                  <select class="form-control form-control-sm" [id]="i + '-filter-accounts'">
                    <option disabled selected hidden>Accounts</option>
                    <option *ngFor="let account of filter.accounts" disabled>{{account.name}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control form-control-sm" [id]="i + '-filter-categories'">
                    <option disabled selected hidden>Categories</option>
                    <option *ngFor="let category of filter.categories" disabled>{{category.name}}</option>
                  </select>
                </td>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp-filter" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp-filter">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(filterModal, 'filter', filter)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteFilter(filter)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--   Templates   -->
  <div class="row">
    <div class="col-12 pr-0 pl-0">
      <div class="card card-frame">
        <div class="card-body">
          <div class="d-flex justify-content-center align-items-center">
            <div class="d-flex flex-grow-1 justify-content-center align-items-center mb-3">
              <h4 class="card-title text-uppercase m-0 ml-2">Templates</h4>
            </div>
            <button type="button" class="btn btn-sm btn-slack btn-icon ml-auto mb-3"
                    (click)="open(templateModal, 'template')">
              <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            </button>
          </div>
          <div class=" table-responsive">
            <table class=" table align-items-center table-flush">
              <thead class=" thead-light">
              <tr>
                <th class="sort text" data-sort="name" scope="col">Name</th>
                <th class="sort text-center" data-sort="category" scope="col">Category</th>
                <th class="sort text-center" data-sort="amount" scope="col">Amount</th>
                <th class="sort text-center" data-sort="account" scope="col">Account</th>
                <th class="sort text-center" data-sort="recordType" scope="col">Record Type</th>
                <th scope="col"></th>
              </tr>
              </thead>
              <tbody class=" list">
              <tr *ngFor="let template of templates">
                <th scope="row">
                  <div class=" media align-items-center">
                    <div class=" media-body">
                      <span class=" name mb-0 text-sm">
                        {{template.name}}
                      </span>
                    </div>
                  </div>
                </th>
                <td class="budget text-center">{{template.category?.name?? '-'}}</td>
                <td class="budget text-center">{{template.amount?? '-'}}</td>
                <td class="budget text-center">{{template.account?.name?? '-'}}</td>
                <td class="budget text-center">{{template.recordType?? '-'}}</td>
                <td class="text-right">
                  <div dropdown class="dropdown no-caret" [dropup]="true">
                    <a id="dropUp_template" dropdownToggle role="button" class="btn btn-sm btn-icon-only text-light dropdown-toggle"
                       aria-controls="dropUp_template">
                      <i class=" fas fa-ellipsis-v"> </i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow" *dropdownMenu>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="open(templateModal, 'template', template)">Edit</a>
                      <a href="javascript:void(0)" class="dropdown-item" (click)="deleteTemplate(template)">Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--      Modal Account Type    -->
<ng-template #accountTypeModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Account Type</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2">
          <form [formGroup]="formAccountType" (ngSubmit)="isNew ? addAccountType() : updateAccountType()">
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <input formControlName="accountTypeName" class="form-control" placeholder="Name" type="text">
              </div>
            </div>
            <div class="custom-control custom-control-alternative custom-checkbox">
              <input formControlName="accountTypeIsNegative" class="custom-control-input" id="at_is_negative" type="checkbox">
              <label class="custom-control-label" for="at_is_negative">
                <span>Is negative balance?</span>
              </label>
            </div>
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formAccountType.invalid || formAccountType.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!--      Modal Currency    -->
<ng-template #currencyModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Currency</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2">
          <form [formGroup]="formCurrency" (ngSubmit)="isNew ? addCurrency() : updateCurrency()">

            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <select formControlName="currencyName" class="form-control">
                  <option value="" disabled selected hidden>Select Currency</option>
                  <option *ngFor="let currency of currencyList" [ngValue]="currency">{{currency}}</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-image"></i></span>
                </div>
                <select formControlName="currencyIcon" class="form-control fontawesome-icons">
                  <option value="" disabled selected hidden>Select Icon</option>
                  <option *ngFor="let currencyIcon of constants.CURRENCY_ICONS" [ngValue]="currencyIcon.value" [innerHTML]="currencyIcon.name"></option>
                </select>
              </div>
            </div>

            <div class="custom-control custom-control-alternative custom-checkbox">
              <input formControlName="currencyBase" class="custom-control-input" id="cur_is_base" type="checkbox">
              <label class="custom-control-label" for="cur_is_base">
                <span>Is it base?</span>
              </label>
            </div>
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formCurrency.invalid || formCurrency.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!--      Modal Category    -->
<ng-template #categoryModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Category</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2">
          <form [formGroup]="formCategory" (ngSubmit)="isNew ? addCategory() : updateCategory()">

            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <input formControlName="categoryName" class="form-control" placeholder="Name" type="text">
              </div>
            </div>

            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-image"></i></span>
                </div>
                <select formControlName="categoryIcon" class="form-control fontawesome-icons">
                  <option value="" disabled selected hidden>Select Icon</option>
                  <option *ngFor="let categoryIcon of constants.CATEGORY_ICONS" [ngValue]="categoryIcon.value" [innerHTML]="categoryIcon.name"></option>
                </select>
              </div>
            </div>

            <div class="custom-control custom-control-alternative custom-checkbox">
              <input formControlName="categoryExpense" class="custom-control-input" id="cat_is_expense" type="checkbox">
              <label class="custom-control-label" for="cat_is_expense">
                <span>Is it expense?</span>
              </label>
            </div>
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formCategory.invalid || formCategory.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!--      Modal Account    -->
<ng-template #accountModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Account</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2">
          <form [formGroup]="formAccount" (ngSubmit)="isNew ? addAccount() : updateAccount()">
            <!--  Name  -->
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <input formControlName="accountName" class="form-control" placeholder="Name" type="text">
              </div>
            </div>
            <!--  Icon  -->
            <div class="form-group mb-2">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-image"></i></span>
                </div>
                <select formControlName="accountIcon" class="form-control fontawesome-icons">
                  <option value="null" disabled selected hidden>Select Icon</option>
                  <option *ngFor="let accountIcon of constants.ACCOUNT_ICONS" [ngValue]="accountIcon.value" [innerHTML]="accountIcon.name"></option>
                </select>
              </div>
            </div>
            <!--  Balance / Date  -->
            <div class="row">
              <div class="col-12 col-md-6">
                <label class="form-control-label" for="acc_balance">Start Balance</label>
                <div class="form-group mb-2">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-calculator"></i></span>
                    </div>
                    <input formControlName="accountBalance" class="form-control" placeholder="Balance" type="number" id="acc_balance">
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-control-label" for="acc_date">Start Date</label>
                <div class="form-group mb-2">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                    </div>
                    <input type="text"
                           id="acc_date"
                           placeholder="Set Date"
                           class="form-control"
                           bsDatepicker
                           formControlName="accountDate"
                           [bsConfig]="{ isAnimated: true, containerClass: 'theme-green'}">
                  </div>
                </div>
              </div>
            </div>
            <!--  Color / Currency  -->
            <div class="row">
              <div class="col-6">
                <div class="form-group mb-3">
                  <label class="form-control-label" for="acc_color">Color</label>
                  <input formControlName="accountColor" class="form-control" value="#ffffff" type="color" id="acc_color">
                </div>
              </div>
              <div class="col-6">
                <label class="form-control-label" for="acc_currency">Currency</label>
                <div class="form-group mb-3">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="ni ni-world-2"></i></span>
                    </div>
                    <select formControlName="accountCurrency" class="form-control" id="acc_currency" [compareWith]="compareById">
                      <option value="null" disabled selected hidden>Select</option>
                      <option *ngFor="let currency of currencies" [ngValue]="currency">{{currency.name}}</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <!--  Type  -->
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-money-check-alt"></i></span>
                </div>
                <select formControlName="accountType" class="form-control fontawesome-icons" [compareWith]="compareById">
                  <option value="null" disabled selected hidden>Select Type</option>
                  <option *ngFor="let accountType of accountTypes" [ngValue]="accountType">{{accountType.name}}</option>
                </select>
              </div>
            </div>
            <!--  Limit  -->
            <div class="row">
              <div class="col-6 d-flex align-items-center">
                <label for="acc_limit" class="form-control-label">Credit Limit:</label>
              </div>
              <div class="col-6 d-flex align-items-center">
                <div class="form-group mb-3">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-calculator"></i></span>
                    </div>
                    <input formControlName="accountLimit" class="form-control" placeholder="Limit" type="number" id="acc_limit">
                  </div>
                </div>
              </div>
            </div>
            <!--  Buttons  -->
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formAccount.invalid || formAccount.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!--      Modal Filter    -->
<ng-template #filterModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Filter</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2" *ngIf="formFilter">
          <form [formGroup]="formFilter" (ngSubmit)="isNew ? addFilter() : updateFilter()">
            <!--      Name      -->
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <input formControlName="filterName" class="form-control" placeholder="Name" type="text">
              </div>
            </div>
            <!--    startDate-->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                </div>
                <input type="text"
                       placeholder="Datepicker"
                       class="form-control"
                       bsDatepicker
                       formControlName="filterStartDate"
                       [bsConfig]="{ isAnimated: true, containerClass: 'theme-green'}">
                <div class="input-group-append">
                  <span class="input-group-text">From</span>
                </div>
              </div>
            </div>
            <!--      endDate      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                </div>
                <input type="text"
                       placeholder="Datepicker"
                       formControlName="filterEndDate"
                       class="form-control"
                       bsDatepicker
                       [bsConfig]="{ isAnimated: true, containerClass: 'theme-green'}">
                <div class="input-group-append">
                  <span class="input-group-text">To</span>
                </div>
              </div>
            </div>
            <!--      Record Type      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-exchange-alt"></i></span>
                </div>
                <select formControlName="filterRecordType" class="form-control">
                  <option value="null" disabled selected hidden>Select Record Type</option>
                  <option *ngFor="let recordType of constants.RECORD_TYPES" [ngValue]="recordType.value">{{recordType.name}}</option>
                </select>
              </div>
            </div>
            <!--      Categories      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-sitemap"></i></span>
                </div>
                <select formControlName="filterCategories" class="form-control" [compareWith]="compareById" multiple>
                  <option value="null" disabled selected hidden>Select Categories</option>
                  <option *ngFor="let category of categories" [ngValue]="category">{{category.name}}</option>
                </select>
              </div>
            </div>
            <!--      Accounts      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-university"></i></span>
                </div>
                <select formControlName="filterAccounts" class="form-control" [compareWith]="compareById" multiple>
                  <option value="null" disabled selected hidden>Select Accounts</option>
                  <option *ngFor="let account of accounts" [ngValue]="account">{{account.name}}</option>
                </select>
              </div>
            </div>
            <!--      Buttons      -->
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formFilter.invalid || formFilter.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!--      Modal Template    -->
<ng-template #templateModal let-c="close" let-d="dismiss">
  <div class="modal-content">
    <div class="modal-body p-0">
      <div class="card bg-secondary shadow border-0 mb-0">
        <div class="card-header bg-white pb-0">
          <div class="text-muted text-center mb-3">
            <h3>{{isNew ? 'Add' : 'Edit'}} Template</h3>
          </div>
        </div>
        <div class="card-body px-lg-5 py-lg-2">
          <form [formGroup]="formTemplate" (ngSubmit)="isNew ? addTemplate() : updateTemplate()">
            <!--      Name      -->
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="ni ni-tag"></i></span>
                </div>
                <input formControlName="templateName" class="form-control" placeholder="Name" type="text">
              </div>
            </div>
            <!--      Category      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-sitemap"></i></span>
                </div>
                <select formControlName="templateCategory" class="form-control" [compareWith]="compareById">
                  <option value="null" disabled selected hidden>Select Category</option>
                  <option *ngFor="let category of categories" [ngValue]="category">{{category.name}}</option>
                </select>
              </div>
            </div>
            <!--      Account      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-university"></i></span>
                </div>
                <select formControlName="templateAccount" class="form-control" [compareWith]="compareById">
                  <option value="null" disabled selected hidden>Select Account</option>
                  <option *ngFor="let account of accounts" [ngValue]="account">{{account.name}}</option>
                </select>
              </div>
            </div>
            <!--      Record Type      -->
            <div class="form-group">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-exchange-alt"></i></span>
                </div>
                <select formControlName="templateRecordType" class="form-control">
                  <option value="null" disabled selected hidden>Select Record Type</option>
                  <option *ngFor="let recordType of constants.RECORD_TYPES" [ngValue]="recordType.value">{{recordType.name}}</option>
                </select>
              </div>
            </div>
            <!--      Amount      -->
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-calculator"></i></span>
                </div>
                <input formControlName="templateAmount" class="form-control" placeholder="Amount" type="number">
              </div>
            </div>
            <!--      Buttons      -->
            <div class="d-flex justify-content-between my-4">
              <button type="submit" class="btn btn-success" [disabled]="formTemplate.invalid || formTemplate.disabled">{{isNew ? 'Add' : 'Edit'}}</button>
              <button type="button" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="c('Close click')">Dismiss</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</ng-template>
